<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeeMeet - Gestion Usuarios</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="../../css/app.css">
    <link
            href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <!--DataTables-->
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.6/css/dataTables.dataTables.css" />
    <script src="https://cdn.datatables.net/2.0.6/js/dataTables.js"></script>
    <!--SiderBar-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body>

<div id="headers"></div>

<div class="content">
    <br>
    <h1 class="title-example text-center">GESTIONAR INVITADOS</h1>
    <br><br>
    <br>



    <div class="__Tabla table-responsive paragraph-example">
        <table class="tabla table table-hover table-bordered  table-sm" id="Tabla">
            <thead class="tabla__cabecera">
            <tr>
                <th scope="col" data-sort="id" class="cabecera">ID</th>
                <th scope="col" data-sort="nombre" class="cabecera">Nombre</th>
                <th scope="col" data-sort="email" class="cabecera">Correo Electrónico</th>
                <th scope="col" data-sort="tipoU" class="cabecera">Tipo de Usuario</th>
                <th scope="col" data-sort="acciones" class="cabecera">Acciones</th>
            </tr>
            </thead>
            <tbody class="tabla__cuerpo" id="tbodyInvitados">
            </tbody>
        </table>
    </div>
    <br>


</div>


<div id="footers"></div>

<script>
    window.onload = function () {
        cargarInvitados();
    }


    function cargarInvitados(){
        console.log('Cargando invitados...');
        fetch('/admin/catalogo/invitados')
            .then(response => response.json())
            .then(invitados => {

                console.log(invitados);

                const tbody = document.getElementById('tbodyInvitados');
                invitados.forEach(item => {
                    var rol = "";
                    if(item.es_colado_invitado == 1){
                        rol = "Invitado";
                    }else{
                        rol = "Acompañante";
                    }
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="id">${item.id_invitado}</td>
                        <td class="nombre">${item.nombre_invitado}</td>
                        <td class="email">${item.email_invitado}</td>
                        <td class="tipoU">${rol}</td>

                        <td class="acciones">
                          <button class="btn btn-sm editar" onclick="modificarInv(${item.id_invitado})"><img src="../../img/icons/ico-editar.svg" alt="Editar"></button>
                          <button class="btn btn-sm eliminar" onclick="eliminarInv(${item.id_invitado})"><img src="../../img/icons/ico-trash.svg" alt="Eliminar"></button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });





            })
            .catch(error => console.error('Error al obtener usuarios:', error));
    }


    function modificarInv(id){
        console.log('Modificar invitado:', id);
        window.location.href = `/admin/editarinvitados.html?id=${id}`;

    }
    function eliminarInv(id){
        console.log('Eliminar invitado:', id);
    }



</script>
<script src="../../js/admin/headers.js"></script>
<script src="../../js/sidebar.js"></script>
<!--
<script src="../../js/gestionUsuarios.js"></script>
-->
<script src="/build/js/header.js"></script>
<script src="../../../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../../js/superAdmin.js"></script>
</body>

</html>