<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeeMeet - Registro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../css/app.css">
    <!--Formulario-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!--SiderBar-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body>
    

    <div id="blur" class=""></div>

    <header>
        <nav class="navbar navbar-expand navbar-dark">
            <div class="container-fluid">
                <a id="navbar-img" class="navbar-brand" href="#">
                    <img id="navbar-imgs" src="/build/img/BeeMeet2.png" alt="Logo">
                </a>
                <div class="navbar-nav ms-auto">
                    <div class="nav-item dropdown">
                        <button class="navbar__profile-container nav-link profile-button" onclick="toggleMenu()">
                            <div id="user-menu" style="display: none;">
                                <a href="#">Mis datos</a>
                                <a href="#">Cerrar sesión</a>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="contenidoPrincipal">
        <div class="registrarInforPersonal">
            <h1 class="title-example text-center">Registrar Información Personal</h1>
            
                <form id="formInvitado" class="Formulario needs-validation paragraph-example" novalidate>
                    <div class="informacionPersonal">
                        <h2 class="personal__titulo">Información Personal</h2>
                        <div class="form-group col-md-4 has-validation">
                            <label>Nombre*:</label>
                            <input type="text" class="form-control form-control-lg" placeholder="Nombre" id="nombre" name="nombre" required>
                            <div class="invalid-feedback">Ingrese su Nombre.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation">
                            <label>Apellido Paterno*:</label>
                            <input type="text" class="form-control form-control-lg" placeholder="Apellido Paterno" id="apellidoPaterno" name="apellidoPaterno" required>
                            <div class="invalid-feedback">Ingrese su Apellido Paterno.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation">
                            <label>Apellido Materno*:</label>
                            <input type="text" class="form-control form-control-lg" placeholder="Apellido Materno" id="apellidoMaterno" name="apellidoMaterno" required>
                            <div class="invalid-feedback">Ingrese su Apellido Materno.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation">
                            <label>Correo Electrónico*:</label>
                            <input type="email" class="form-control form-control-lg" placeholder="email@example.com" id="correo" name="correo" required>
                            <div class="invalid-feedback">Ingrese un correo válido.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation">
                            <label>Número de teléfono*:</label>
                            <input type="tel" class="form-control form-control-lg" placeholder="Ingrese su número telefónico" pattern="[0-9]{10}" id="telefono" name="telefono" required>
                            <div class="invalid-feedback">Ingrese un número telefónico válido.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation">
                            <label>Empresa a la que pertenece*:</label>
                            <input type="text" class="form-control form-control-lg" placeholder="Ingrese su Empresa de procedencia" id="empresa" name="empresa" required>
                            <div class="invalid-feedback">Ingrese su empresa de procedencia.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation"  >
                            <label>Identificación oficial a presentar*:</label>
                            <select class="custom-select form-control-lg" id="identificacion" name="identificacion" required>
                                <option value="">Elija una opción...</option>
                                <option value="INE">INE</option>
                                <option value="Pasaporte">Pasaporte</option>
                                <option value="Visa">Visa</option>
                            </select>
                            <div class="invalid-feedback">Debe elegir una de las opciones.</div>
                        </div>
                        <div class="form-group col-md-4 has-validation">
                            <label for="foto" class="form-label">Fotografía reciente</label>
                            <input class="form-control form-control-lg" type="file" accept="image/*" id="foto" name="foto" required>
                            <div class="invalid-feedback">Debe subir un archivo.</div>
                        </div>
                    </div>
                    <div class="informacionAcompañantes">
                        <h2 class="acompañantes__titulo">Información de Acompañantes</h2>
                        <div class="form-group">
                            <label>¿Llevará acompañantes a la reunión? *</label>
                            <div class="col-md-6 has-validation">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="acompanantes" id="radioSi" value="si" required>
                                    <label class="form-check-label" for="radioSi">Sí</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="acompanantes" id="radioNo" value="no" required>
                                    <label class="form-check-label" for="radioNo">No</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">Marque una de las opciones.</div>
                        </div>
                        <div id="acompanantesHabilitada" class="hidden">
                            <div class="form-group col-md-4 has-validation">
                                <label>Número de Acompañantes:</label>
                                <input type="text" class="form-control form-control-lg">
                            </div>
                            <div class="form-group col-md-4 has-validation">
                                <label>Nombre*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Nombre" required>
                                <div class="invalid-feedback">Ingrese su Nombre.</div>
                            </div>
                            <div class="form-group col-md-4 has-validation">
                                <label>Apellido Paterno*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Apellido Paterno" required>
                                <div class="invalid-feedback">Ingrese su Apellido Paterno.</div>
                            </div>
                            <div class="form-group col-md-4 has-validation">
                                <label>Apellido Materno*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Apellido Materno" required>
                                <div class="invalid-feedback">Ingrese su Apellido Materno.</div>
                            </div>
                            <div class="form-group col-md-4 has-validation">
                                <label>Correo Electrónico*:</label>
                                <input type="email" class="form-control form-control-lg" placeholder="email@example.com" required>
                                <div class="invalid-feedback">Ingrese un correo válido.</div>
                            </div>
                        </div>
                    </div>
                    <div class="informacionDispositivos">
                        <h2 class="dispositivos__titulo">Información de Dispositivos</h2>
                        <div class="form-group">
                            <label>¿Llegará con dispositivos a la reunión? *</label>
                            <div class="has-validation">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="dispositivos" id="radioDispositivosSi" value="si" required>
                                    <label class="form-check-label" for="radioDispositivosSi">Sí</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="dispositivos" id="radioDispositivosNo" value="no" required>
                                    <label class="form-check-label" for="radioDispositivosNo">No</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">Marque una de las opciones.</div>
                        </div>
                        <div id="dispositivosHabilitada" class="hidden">
                            <div class="form-group col-md-4">
                                <label>Número de serie*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Tipo de Dispositivo" required>
                                <div class="invalid-feedback">Ingrese el tipo de dispositivo.</div>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Modelo*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Modelo del Dispositivo" required>
                                <div class="invalid-feedback">Ingrese el modelo del dispositivo.</div>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Marca*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Marca del Dispositivo" required>
                                <div class="invalid-feedback">Ingrese la marca del dispositivo.</div>
                            </div>
                        </div>
                    </div>
                    <div class="informacionAutomovil">
                        <h2 class="automovil__titulo">Información de Automóvil</h2>
                        <div class="form-group">
                            <label>¿Llegará con automóvil a la reunión? *</label>
                            <div class="col-md-6">
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="automovil" id="radioAutoSi" value="si" required>
                                    <label class="form-check-label" for="radioAutoSi">Sí</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="automovil" id="radioAutoNo" value="no" required>
                                    <label class="form-check-label" for="radioAutoNo">No</label>
                                </div>
                            </div>
                            <div class="invalid-feedback">Marque una de las opciones.</div>
                        </div>
                        <div id="automovilHabilitada" class="hidden">
                            <div class="form-group col-md-4">
                                <label>Número de Placa*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Número de Placa" required>
                                <div class="invalid-feedback">Ingrese el número de placa.</div>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Marca*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Marca" required>
                                <div class="invalid-feedback">Ingrese la marca del automóvil.</div>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Modelo*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Modelo" required>
                                <div class="invalid-feedback">Ingrese el modelo del automóvil.</div>
                            </div>
                            <div class="form-group col-md-4">
                                <label>Color*:</label>
                                <input type="text" class="form-control form-control-lg" placeholder="Color" required>
                                <div class="invalid-feedback">Ingrese el color del automóvil.</div>
                            </div>
                        </div>
                    </div>
                    <input class="confirm__btn" type="submit" value="Siguiente">
                </form>
        </div>
    </main>

    <footer class="footer">
        <div class="contenedor">
            <div class="beemeet">
                <div class="beemeet__logo">
                    <img src="../../img/BeeMeet2.png" alt="Logo Beemeet">
                </div>
                <h3 class="beemeet__titulo">BeeMeet</h3>
            </div>
            <div class="usernames">
                <p>Equipo de BeeCoders:</p>
                <div class="usernames__container">
                    <div class="usernames1">
                        <p>@RafaElJefe</p>
                        <p>@DianaLaConsejera</p>
                        <p>@CesarLaLechugaFresca</p>
                        <p>@LizardiElGranProgramador</p>
                        <p>@DaniBoyElFrontProgramador</p>
                        <p>@DiegoElCPC</p>
                    </div>
                    <div class="usernames2">
                        <p>@RorroElMusculoso</p>
                        <p>@LeoElCuadrado</p>
                        <p>@ToñitoElChispas</p>
                        <p>@AdoElBienPortado</p>
                        <p>@VallejoLaCreativa</p>
                        <p>@SaulElChambeador</p>
                    </div>
                </div>
            </div>
        </div>
        <hr>
        <p class="copyright">Copyright. Todos los derechos reservados. BeeMeet © 2024</p>
    </footer>

    <script>
        const formInvitado = document.getElementById('formInvitado');
        formInvitado.addEventListener('submit', function(event) {
            event.preventDefault(); // Evitar el envío del formulario por defecto

            const nombre = document.getElementById('nombre').value;
            const apellidoPaterno = document.getElementById('apellidoPaterno').value;
            const apellidoMaterno = document.getElementById('apellidoMaterno').value;
            const correo = document.getElementById('correo').value;
            const telefono = document.getElementById('telefono').value;
            const empresa = document.getElementById('empresa').value;
            const identificacion = document.getElementById("identificacion").value;
            const foto = document.getElementById("foto").files[0];
            
            let data = {
                nombre: nombre,
                apellidoPat: apellidoPaterno,
                apellidoMa: apellidoMaterno,
                correo: correo,
                tel: telefono,
                empresa: empresa,
                identificacion: identificacion
            };

            if (foto) {
                const reader = new FileReader();
                reader.onloadend = function() {
                    data.foto = reader.result; // Añade la foto en formato Base64 al objeto data
                    enviarData(data);
                };
                reader.readAsDataURL(foto);
            } else {
                enviarData(data); // Enviar sin foto si no se seleccionó ninguna
            }
        });
        function enviarData(data) {
            fetch('/invitado/registrarinformacion', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Respuesta del servidor:', data);
                window.location.href = 'cambiarContraseña.html';
            })
            .catch(error => console.error('Error al mandar datos:', error));
        }
    </script>

    
    <script src="/build/js/header.js"></script>
    <script src="../../js/sidebar.js"></script>

    <script src="../../js/registrarInformacionPersonal.js"></script>
    <script src="../../js/plantilla-formularios.js"></script>

</body>

</html>