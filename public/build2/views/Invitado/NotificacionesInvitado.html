<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeeMeet - Registro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
            href="https://fonts.googleapis.com/css2?family=Dosis:wght@200..800&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
            rel="stylesheet">
    <link rel="stylesheet" href="../../css/app.css">
    <!--Formulario-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!--SiderBar-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    <style>
        .centerThis {
            margin: auto;
            width: 89%;
            padding: 10px;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            margin-bottom: 10px;
        }

        h4 {
            padding: 0px;
            margin: 0px;
            font-weight: 400;

            display: inline;
        }

        button {
            padding: 8px 12px;
            margin-right: 10px;
            cursor: pointer;
        }


        form {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        input[type="submit"] {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-top: 10px;
            cursor: pointer;
            border-radius: 4px;
        }

        .card{
            border: 1px solid #ccc;
            border-radius: 2px;
            padding: 5px;
            margin-bottom: 10px;
        }

        .fechas li{
            list-style: none;

        }

        .cardszzz {

            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .card p {
            margin: 0;
            white-space: nowrap;
            display: inline-flex;
        }

    </style>

</head>

<body>
<div id="headers"></div>

<main class="contenidoPrincipal">
    <div id="contenedor_main">
        <div class="registrarInforPersonal">
            <section class="cRegistro">
                <h1 class="title-example text-center">Reuniones Pendientes</h1>

                <div id="divReuniones" class="cardszzz"></div>

                <hr>






            </section>

        </div>
    </div>
</main>

<div id="footers"></div>

<script>
    window.onload = function () {
        obtenerReuniones();
    }


    function obtenerReuniones() {
        fetch('reunionesNuevas')
            .then(response => response.json())
            .then(reuniones => {
                console.log('reuniones xd:', reuniones);

                const divReunion = document.getElementById('divReuniones');
                divReunion.innerHTML = '';

                reuniones.forEach(reunion => {
                    const card = document.createElement('div');
                    card.classList.add('card');

                    const emailDiv = 'correoInv-' + reunion.id_reunion;
                    const acompanantesDiv = 'acompanantesInv-' + reunion.id_reunion;

                    card.innerHTML = `

                    <h4><b>Reunion id: </b>${reunion.id_reunion}</h4>

                    <div class="asunto">
                    <h4><b>Asunto: </b></h4>
                    <p>${reunion.titulo_reunion}</p>
                    </div>


                    <h4><b>Fechas: </b>${reunion.numRepeticion}</h4>
                    <ul class="fechas">${reunion.fechasRepeticion.map(fecha =>
                        `<li>${fecha.id_repeticion} ,
                        ${fecha.fecha_repeticion}, ${fecha.hora_inicio_repeticion} - ${fecha.hora_fin_repeticion},
                        ${fecha.estatus_repeticion}</li>

                    `).join('')}
                    </ul>


                    <h4><b>Descripci√≥n</b></h4>
                    <br/>
                    <p>${reunion.descripcion_reunion}</p>
                    <br/>
                    <h4><b>Sala: </b>${reunion.nombreSala}</h4>
                    <br/>

                    <h4><b>Anfitrion: </b>${reunion.nombreUsuario} </h4>



                    <button onclick="aceptar(${reunion.id_reunion})">Aceptar</button>
                    <button onclick="declinar(${reunion.id_reunion})">Eliminar</button>



                    `;
                    divReuniones.appendChild(card);
                });




            })
            .catch(error => {

                console.error('Error:', error);
            });
    }

    function aceptar(id_reunion) {
        console.log('aceptar', id_reunion);
        /*
        fetch('aceptarReunion', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({id_reunion})
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                obtenerReuniones();
            })
            .catch((error) => {
                console.error('Error:', error);
            });
            */
    }

    function declinar(id_reunion) {
        console.log('declinar', id_reunion);
        /*fetch('declinarReunion', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({id_reunion})
        })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                obtenerReuniones();
            })
            .catch((error) => {
                console.error('Error:', error);
            });
            */
    }


</script>
<script src="../../js/invitado/headers.js"></script>
<script src="../../js/header.js"></script>
<script src="../../js/sidebar.js"></script>

<!--<script src="../../js/registrarInformacionPersonal.js"></script>-->
<script src="../../js/plantilla-formularios.js"></script>

</body>

</html>